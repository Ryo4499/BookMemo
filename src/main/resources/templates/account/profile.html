<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>BookMemoプロフィール</title>
    <link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon" />
    <link rel="stylesheet" th:href="@{/css/global.css}" type="text/css" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
      type="text/css"
    />
    <link rel="stylesheet" th:href="@{/css/profile.css}" type="text/css" />
  </head>

  <body>
    <script th:inline="javascript">
      /*<![CDATA[*/
      let message = /*[[${success}]]*/ "default";
      if (message) {
        window.alert(message);
      }
      /*]]>*/
    </script>

    <header th:replace="common/header"></header>
    <div class="container wrapper mt-2">
      <article class="row">
        <div class="col-3"></div>
        <div class="container col-6">
          <h1 class="mt-4">Profile</h1>
          <form action="" method="post" th:object="${updateForm}">
            <input
              type="hidden"
              th:name="${_csrf.parameterName}"
              th:value="${_csrf.token}"
            />
            <div
              th:if="${errorPass} != null"
              th:text="${errorPass}"
              class="text-center error"
            ></div>
            <div class="form-group row mt-3">
              <label for="" class="col-form-label fs-5">アカウント名</label>
              <div
                th:if="${#fields.hasErrors('accountName')}"
                th:errors="*{accountName}"
                class="text-center text-danger mb-1"
              ></div>
              <input
                type="text"
                name="accountName"
                id="accountName"
                placeholder="account name"
                th:value="*{accountName}"
                class="col-auto"
              />
            </div>
            <div class="form-group row mt-2">
              <label for="" class="col-form-label fs-5">Eメール</label>
              <div
                th:if="${#fields.hasErrors('email')}"
                th:errors="*{email}"
                class="text-center text-danger mb-1"
              ></div>
              <input
                type="email"
                id="email"
                class="col-auto"
                name="email"
                placeholder="email"
                th:value="*{email}"
              />
            </div>
            <div class="form-group row mt-2">
              <label for="" class="col-form-label fs-5">現在のパスワード</label>
              <div
                th:if="${#fields.hasErrors('oldPassword')}"
                th:errors="*{oldPassword}"
                class="text-center text-danger mb-1"
              ></div>
              <input
                type="password"
                name="oldPassword"
                id="oldPassword"
                class="col-auto"
                placeholder="current password"
                th:value="*{oldPassword}"
              />
            </div>
            <div class="form-group row mt-2">
              <label for="" class="col-form-label fs-5">新規パスワード</label>
              <div
                th:if="${#fields.hasErrors('newPassword')}"
                th:errors="*{newPassword}"
                class="text-center text-danger mb-1"
              ></div>
              <input
                type="password"
                name="newPassword"
                id="newPassword"
                class="col-auto"
                placeholder="new password"
                th:value="*{newPassword}"
              />
            </div>
            <div class="form-group row mt-2">
              <label for="" class="col-form-label fs-5">
                新規パスワード(確認用)
              </label>
              <div
                th:if="${#fields.hasErrors('rePassword')}"
                th:errors="*{rePassword}"
                class="text-center text-danger mb-1"
              ></div>
              <input
                type="password"
                name="rePassword"
                id="rePassword"
                class="col-auto"
                placeholder="confirm new password"
                th:value="*{rePassword}"
              />
            </div>

            <br />
            <div class="form-group row mt-4">
              <div class="col-5"></div>
              <button type="submit" class="btn btn-dark col-2">変更</button>
              <div class="col-5"></div>
            </div>
          </form>
          <div class="row mt-4">
            <div class="col-5"></div>
            <a th:href="@{/delete/}" class="btn btn-danger col-2">削除</a>
            <div class="col-5"></div>
          </div>
        </div>
        <div class="col-3"></div>
      </article>
    </div>
    <footer th:replace="common/footer"></footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
